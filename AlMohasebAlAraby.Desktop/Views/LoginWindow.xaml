<Window x:Class="AlMohasebAlAraby.Desktop.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="تسجيل الدخول - المحاسب العربي" 
        Height="500" Width="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True">

    <Border Background="{DynamicResource MaterialDesignPaper}" 
            CornerRadius="10"
            materialDesign:ShadowAssist.ShadowDepth="Depth3">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- شريط العنوان -->
            <materialDesign:ColorZone Grid.Row="0" 
                                      Mode="PrimaryMid" 
                                      Padding="16"
                                      CornerRadius="10,10,0,0"
                                      MouseLeftButtonDown="ColorZone_MouseLeftButtonDown">
                <DockPanel>
                    <Button DockPanel.Dock="Left" 
                            Style="{StaticResource MaterialDesignIconForegroundButton}"
                            Foreground="White"
                            Click="btnClose_Click"
                            Width="24" Height="24">
                        <materialDesign:PackIcon Kind="Close" Width="16" Height="16"/>
                    </Button>
                    
                    <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" HorizontalAlignment="Center">
                        <materialDesign:PackIcon Kind="Calculator" Width="32" Height="32" Foreground="White" VerticalAlignment="Center"/>
                        <TextBlock Text="المحاسب العربي" 
                                   FontSize="18" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   VerticalAlignment="Center" 
                                   Margin="10,0,0,0"/>
                    </StackPanel>
                </DockPanel>
            </materialDesign:ColorZone>

            <!-- محتوى تسجيل الدخول -->
            <StackPanel Grid.Row="1" Margin="40,30">
                <!-- شعار التطبيق -->
                <StackPanel HorizontalAlignment="Center" Margin="0,0,0,30">
                    <Ellipse Width="80" Height="80" 
                             Fill="{DynamicResource PrimaryHueMidBrush}"
                             Margin="0,0,0,10">
                        <Ellipse.Effect>
                            <DropShadowEffect ShadowDepth="2" BlurRadius="5" Opacity="0.3"/>
                        </Ellipse.Effect>
                    </Ellipse>
                    <materialDesign:PackIcon Kind="Calculator" 
                                             Width="40" Height="40" 
                                             Foreground="White"
                                             HorizontalAlignment="Center"
                                             Margin="0,-60,0,0"/>
                    <TextBlock Text="الإصدار المصري" 
                               FontSize="14" 
                               Foreground="{DynamicResource MaterialDesignBodyLight}"
                               HorizontalAlignment="Center"
                               Margin="0,40,0,0"/>
                </StackPanel>

                <!-- حقول تسجيل الدخول -->
                <StackPanel>
                    <!-- اسم المستخدم -->
                    <TextBox x:Name="txtUsername"
                             materialDesign:HintAssist.Hint="اسم المستخدم"
                             materialDesign:HintAssist.IsFloating="True"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="0,0,0,20"
                             FontSize="16"
                             Text="admin">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>

                    <!-- كلمة المرور -->
                    <PasswordBox x:Name="txtPassword"
                                 materialDesign:HintAssist.Hint="كلمة المرور"
                                 materialDesign:HintAssist.IsFloating="True"
                                 Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                 Margin="0,0,0,20"
                                 FontSize="16">
                        <PasswordBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                        </PasswordBox.InputBindings>
                    </PasswordBox>

                    <!-- تذكرني -->
                    <CheckBox x:Name="chkRememberMe"
                              Content="تذكرني"
                              Margin="0,0,0,20"
                              HorizontalAlignment="Right"/>

                    <!-- رسالة الخطأ -->
                    <TextBlock x:Name="txtErrorMessage"
                               Style="{StaticResource ErrorStyle}"
                               Visibility="Collapsed"
                               TextWrapping="Wrap"
                               Margin="0,0,0,20"/>

                    <!-- زر تسجيل الدخول -->
                    <Button x:Name="btnLogin"
                            Content="تسجيل الدخول"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="{DynamicResource PrimaryHueMidBrush}"
                            Foreground="White"
                            FontSize="16"
                            Height="45"
                            Margin="0,0,0,15"
                            Click="btnLogin_Click">
                        <Button.Effect>
                            <DropShadowEffect ShadowDepth="2" BlurRadius="5" Opacity="0.3"/>
                        </Button.Effect>
                    </Button>

                    <!-- رابط نسيت كلمة المرور -->
                    <Button x:Name="btnForgotPassword"
                            Content="نسيت كلمة المرور؟"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="{DynamicResource PrimaryHueMidBrush}"
                            HorizontalAlignment="Center"
                            FontSize="12"/>
                </StackPanel>
            </StackPanel>

            <!-- معلومات إضافية -->
            <StackPanel Grid.Row="2" 
                        Background="{DynamicResource MaterialDesignDivider}"
                        Padding="20,10">
                <TextBlock Text="نظام محاسبة شامل للسوق المصري"
                           FontSize="12"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="الإصدار 1.0.0 - جميع الحقوق محفوظة"
                           FontSize="10"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
            </StackPanel>

            <!-- مؤشر التحميل -->
            <Grid x:Name="LoadingOverlay" 
                  Grid.RowSpan="3"
                  Background="#80000000"
                  Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                                 Width="50" Height="50"
                                 IsIndeterminate="True"
                                 Foreground="White"/>
                    <TextBlock Text="جاري تسجيل الدخول..."
                               Foreground="White"
                               FontSize="14"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
