<Page x:Class="AlMohasebAlAraby.Desktop.Views.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      Title="لوحة المعلومات الرئيسية">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- العنوان الرئيسي -->
            <TextBlock Grid.Row="0" 
                       Text="لوحة المعلومات الرئيسية" 
                       Style="{StaticResource TitleStyle}"
                       Margin="0,0,0,20"/>

            <!-- بطاقات الإحصائيات السريعة -->
            <UniformGrid Grid.Row="1" Columns="4" Margin="0,0,0,20">
                <!-- إجمالي المبيعات اليوم -->
                <materialDesign:Card Style="{StaticResource DashboardCardStyle}" Background="#4CAF50">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="CashRegister" 
                                                 Width="48" Height="48" 
                                                 Foreground="White" 
                                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="مبيعات اليوم" 
                                   FontSize="16" 
                                   Foreground="White" 
                                   TextAlignment="Center" 
                                   Margin="0,10,0,5"/>
                        <TextBlock x:Name="txtTodaySales" 
                                   Text="0.00 ج.م" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   TextAlignment="Center"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- إجمالي المشتريات اليوم -->
                <materialDesign:Card Style="{StaticResource DashboardCardStyle}" Background="#FF9800">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="ShoppingCart" 
                                                 Width="48" Height="48" 
                                                 Foreground="White" 
                                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="مشتريات اليوم" 
                                   FontSize="16" 
                                   Foreground="White" 
                                   TextAlignment="Center" 
                                   Margin="0,10,0,5"/>
                        <TextBlock x:Name="txtTodayPurchases" 
                                   Text="0.00 ج.م" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   TextAlignment="Center"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- الأقساط المستحقة -->
                <materialDesign:Card Style="{StaticResource DashboardCardStyle}" Background="#F44336">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="AlertCircle" 
                                                 Width="48" Height="48" 
                                                 Foreground="White" 
                                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="أقساط مستحقة" 
                                   FontSize="16" 
                                   Foreground="White" 
                                   TextAlignment="Center" 
                                   Margin="0,10,0,5"/>
                        <TextBlock x:Name="txtDueInstallments" 
                                   Text="0" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   TextAlignment="Center"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- أصناف منخفضة المخزون -->
                <materialDesign:Card Style="{StaticResource DashboardCardStyle}" Background="#9C27B0">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="PackageDown" 
                                                 Width="48" Height="48" 
                                                 Foreground="White" 
                                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="مخزون منخفض" 
                                   FontSize="16" 
                                   Foreground="White" 
                                   TextAlignment="Center" 
                                   Margin="0,10,0,5"/>
                        <TextBlock x:Name="txtLowStockItems" 
                                   Text="0" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="White" 
                                   TextAlignment="Center"/>
                    </StackPanel>
                </materialDesign:Card>
            </UniformGrid>

            <!-- الإجراءات السريعة -->
            <materialDesign:Card Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="الإجراءات السريعة" Style="{StaticResource SubtitleStyle}"/>
                    <UniformGrid Columns="4">
                        <Button x:Name="btnNewSale" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Background="#4CAF50"
                                Margin="5"
                                Padding="15,10">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="CashRegister" Width="32" Height="32" Foreground="White"/>
                                <TextBlock Text="فاتورة مبيعات" Foreground="White" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button x:Name="btnNewPurchase" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Background="#FF9800"
                                Margin="5"
                                Padding="15,10">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="ShoppingCart" Width="32" Height="32" Foreground="White"/>
                                <TextBlock Text="فاتورة مشتريات" Foreground="White" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button x:Name="btnNewInstallment" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Background="#2196F3"
                                Margin="5"
                                Padding="15,10">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="FileDocument" Width="32" Height="32" Foreground="White"/>
                                <TextBlock Text="عقد تقسيط" Foreground="White" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button x:Name="btnNewJournalEntry" 
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Background="#9C27B0"
                                Margin="5"
                                Padding="15,10">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="BookOpen" Width="32" Height="32" Foreground="White"/>
                                <TextBlock Text="قيد يومية" Foreground="White" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>
                    </UniformGrid>
                </StackPanel>
            </materialDesign:Card>

            <!-- المحتوى التفصيلي -->
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- آخر المعاملات -->
                <materialDesign:Card Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="آخر المعاملات" Style="{StaticResource SubtitleStyle}"/>
                        <DataGrid x:Name="dgRecentTransactions" 
                                  Height="300"
                                  AutoGenerateColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="التاريخ" Binding="{Binding Date, StringFormat='dd/MM/yyyy'}" Width="80"/>
                                <DataGridTextColumn Header="النوع" Binding="{Binding Type}" Width="100"/>
                                <DataGridTextColumn Header="الوصف" Binding="{Binding Description}" Width="*"/>
                                <DataGridTextColumn Header="المبلغ" Binding="{Binding Amount, StringFormat='#,##0.00 ج.م'}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </materialDesign:Card>

                <!-- التنبيهات والإشعارات -->
                <materialDesign:Card Grid.Column="1" Style="{StaticResource CardStyle}" Margin="10,0,0,0">
                    <StackPanel>
                        <TextBlock Text="التنبيهات والإشعارات" Style="{StaticResource SubtitleStyle}"/>
                        <ScrollViewer Height="300" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="spNotifications">
                                <!-- سيتم ملء التنبيهات برمجياً -->
                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </materialDesign:Card>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>
